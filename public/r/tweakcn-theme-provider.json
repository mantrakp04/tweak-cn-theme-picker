{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tweakcn-theme-provider",
  "type": "registry:component",
  "title": "TweakCN Theme Provider",
  "description": "Theme provider component that integrates TweakCN themes with next-themes.",
  "dependencies": [
    "next-themes"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/tweakcn-theme-provider/theme-provider.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { ThemeProvider as NextThemesProvider } from \"next-themes\"\nimport type { ThemeProviderProps } from \"next-themes\"\nimport type { Theme } from \"./lib/tweakcn\"\n\n\nexport function useTweakCNThemes() {\n  const [currentTheme, setCurrentTheme] = React.useState<Theme | null>(null)\n\n  const applyTheme = React.useCallback((theme: Theme | null) => {\n    if (typeof window === 'undefined') return\n\n    if (theme) {\n      applyThemeStyles(theme)\n      localStorage.setItem(\"theme-config\", JSON.stringify(theme))\n      setCurrentTheme(theme)\n    } else {\n      clearThemeStyles()\n      localStorage.removeItem(\"theme-config\")\n      setCurrentTheme(null)\n    }\n  }, [])\n\n  React.useEffect(() => {\n    const stored = localStorage.getItem(\"theme-config\")\n    if (stored) {\n      try {\n        const theme = JSON.parse(stored) as Theme\n        setCurrentTheme(theme)\n        applyThemeStyles(theme)\n      } catch (error) {\n        console.error(\"Failed to parse stored theme:\", error)\n      }\n    }\n  }, [])\n\n  return {\n    currentTheme,\n    applyTheme,\n    setTheme: applyTheme,\n  }\n}\n\nconst THEME_STYLE_ID = \"tweakcn-theme-styles\"\n\nfunction generateThemeCSS(theme: Theme): string {\n  const cssLines: string[] = []\n\n  const getCSSVariables = (vars: Record<string, string>) => {\n    return Object.entries(vars)\n      .map(([key, value]) => `  --${key}: ${value};`)\n      .join(\"\\n\")\n  }\n\n  if (theme.cssVars.theme) {\n    const themeVars = getCSSVariables(theme.cssVars.theme)\n    cssLines.push(`:root {\\n${themeVars}\\n}`)\n  }\n\n  const lightVars = getCSSVariables(theme.cssVars.light)\n  cssLines.push(`:root {\\n${lightVars}\\n}`)\n\n  const darkVars = getCSSVariables(theme.cssVars.dark)\n  cssLines.push(`.dark {\\n${darkVars}\\n}`)\n\n  return cssLines.join(\"\\n\\n\")\n}\n\nfunction applyThemeStyles(theme: Theme) {\n  const existingStyle = document.getElementById(THEME_STYLE_ID)\n  if (existingStyle) {\n    existingStyle.remove()\n  }\n\n  const styleTag = document.createElement(\"style\")\n  styleTag.id = THEME_STYLE_ID\n  styleTag.textContent = generateThemeCSS(theme)\n  document.head.appendChild(styleTag)\n}\n\nfunction clearThemeStyles() {\n  const existingStyle = document.getElementById(THEME_STYLE_ID)\n  if (existingStyle) {\n    existingStyle.remove()\n  }\n}\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/new-york/blocks/tweakcn-theme-provider/lib/tweakcn.ts",
      "content": "export interface Theme {\n  $schema?: string\n  name: string\n  type: string\n  css?: Record<string, Record<string, string>>\n  cssVars: {\n    theme?: Record<string, string>\n    light: Record<string, string>\n    dark: Record<string, string>\n  }\n}\n\ninterface CachedTheme {\n  theme: Theme\n  timestamp: number\n}\n\nconst CACHE_EXPIRY_MS = 24 * 60 * 60 * 1000 // 24 hours\nconst CACHE_PREFIX = \"tweakcn-theme:\"\n\nfunction getCacheKey(url: string): string {\n  return `${CACHE_PREFIX}${url}`\n}\n\nfunction getCachedTheme(url: string): Theme | null {\n  try {\n    const cached = localStorage.getItem(getCacheKey(url))\n    if (!cached) {\n      return null\n    }\n\n    const parsed = JSON.parse(cached) as CachedTheme\n    const isExpired = Date.now() - parsed.timestamp > CACHE_EXPIRY_MS\n\n    if (isExpired) {\n      localStorage.removeItem(getCacheKey(url))\n      return null\n    }\n\n    return parsed.theme\n  } catch (error) {\n    console.warn(\"Failed to get cached theme:\", error)\n    return null\n  }\n}\n\nfunction setCachedTheme(url: string, theme: Theme): void {\n  try {\n    const cached: CachedTheme = {\n      theme,\n      timestamp: Date.now(),\n    }\n    localStorage.setItem(getCacheKey(url), JSON.stringify(cached))\n  } catch (error) {\n    console.warn(\"Failed to cache theme:\", error)\n  }\n}\n\nexport async function fetchTheme(url: string): Promise<Theme> {\n  const cached = getCachedTheme(url)\n  if (cached) {\n    return cached\n  }\n\n  const response = await fetch(url)\n  if (!response.ok) {\n    throw new Error(`Failed to fetch theme: ${response.statusText}`)\n  }\n\n  const theme = await response.json()\n  setCachedTheme(url, theme)\n\n  return theme\n}\n\nexport async function fetchThemes(): Promise<Theme[]> {\n  const promises = THEME_URLS.map((url) => fetchTheme(url))\n  return Promise.all(promises)\n}\n\nexport const THEME_URLS = [\n  \"https://tweakcn.com/r/themes/amber-minimal.json\",\n  \"https://tweakcn.com/r/themes/amethyst-haze.json\",\n  \"https://tweakcn.com/r/themes/bold-tech.json\",\n  \"https://tweakcn.com/r/themes/bubblegum.json\",\n  \"https://tweakcn.com/r/themes/caffeine.json\",\n  \"https://tweakcn.com/r/themes/candyland.json\",\n  \"https://tweakcn.com/r/themes/catppuccin.json\",\n  \"https://tweakcn.com/r/themes/claude.json\",\n  \"https://tweakcn.com/r/themes/claymorphism.json\",\n  \"https://tweakcn.com/r/themes/clean-slate.json\",\n  \"https://tweakcn.com/r/themes/cosmic-night.json\",\n  \"https://tweakcn.com/r/themes/cyberpunk.json\",\n  \"https://tweakcn.com/r/themes/darkmatter.json\",\n  \"https://tweakcn.com/r/themes/doom-64.json\",\n  \"https://tweakcn.com/r/themes/elegant-luxury.json\",\n  \"https://tweakcn.com/r/themes/graphite.json\",\n  \"https://tweakcn.com/r/themes/kodama-grove.json\",\n  \"https://tweakcn.com/r/themes/midnight-bloom.json\",\n  \"https://tweakcn.com/r/themes/mocha-mousse.json\",\n  \"https://tweakcn.com/r/themes/modern-minimal.json\",\n  \"https://tweakcn.com/r/themes/mono.json\",\n  \"https://tweakcn.com/r/themes/nature.json\",\n  \"https://tweakcn.com/r/themes/neo-brutalism.json\",\n  \"https://tweakcn.com/r/themes/northern-lights.json\",\n  \"https://tweakcn.com/r/themes/notebook.json\",\n  \"https://tweakcn.com/r/themes/ocean-breeze.json\",\n  \"https://tweakcn.com/r/themes/pastel-dreams.json\",\n  \"https://tweakcn.com/r/themes/perpetuity.json\",\n  \"https://tweakcn.com/r/themes/quantum-rose.json\",\n  \"https://tweakcn.com/r/themes/retro-arcade.json\",\n  \"https://tweakcn.com/r/themes/sage-garden.json\",\n  \"https://tweakcn.com/r/themes/soft-pop.json\",\n  \"https://tweakcn.com/r/themes/solar-dusk.json\",\n  \"https://tweakcn.com/r/themes/starry-night.json\",\n  \"https://tweakcn.com/r/themes/sunset-horizon.json\",\n  \"https://tweakcn.com/r/themes/supabase.json\",\n  \"https://tweakcn.com/r/themes/t3-chat.json\",\n  \"https://tweakcn.com/r/themes/tangerine.json\",\n  \"https://tweakcn.com/r/themes/twitter.json\",\n  \"https://tweakcn.com/r/themes/vercel.json\",\n  \"https://tweakcn.com/r/themes/vintage-paper.json\",\n  \"https://tweakcn.com/r/themes/violet-bloom.json\",\n] as const\n",
      "type": "registry:lib"
    }
  ]
}